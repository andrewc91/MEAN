<!DOCTYPE html>
<html ng-app='myApp'>
  <head>
    <meta charset="utf-8">
    <title>Products With Factory</title>
    <script src="bower_components/angular/angular.js"></script>
    <script type="text/javascript">
      // module method is just a function that takes two arguments
      // first is the name of the app
      // then pass empty array to tell angular module if there are any added funcionality besides core angular file
      var app = angular.module('myApp', []);
      // console.log(app);

      app.controller('usersController', ['$scope', function($scope){
        // console.log('hi')
        $scope.createUser = function(){
          console.log('submitted');
          $scope.users.push($scope.user);
          $scope.user = {};
        },

        $scope.deleteUser = function(removeUser){
          console.log(removeUser);
          $scope.users.splice($scope.users.indexOf(removeUser), 1);
        }

        $scope.users = [
          {firstName: 'Andrew', lastName: 'Choe', favLanguage: 'JavaScript'},
          {firstName: 'Jon', lastName: 'Kong', favLanguage: 'Python'}
        ]
      }]);

    </script>
  </head>
  <style>
    th {
      border: 1px solid black;
    }
    td {
      border: 1px solid black;
    }
  </style>
  <body>
    <div ng-controller='usersController'>
      <h2>Users Controller</h2>
      <form>
        First Name: <input type="text" ng-model="user.firstName">
        Last Name: <input type="text" ng-model="user.lastName">
        Favorite Language: <input type="text" ng-model="user.favLanguage">
        <input type="submit" value="Create User" ng-click="createUser()"><br><br>
      </form>

      <table>
        <thead>
          <tr>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Favorite Language</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="user in users">
            <td>{{user.firstName}}</td>
            <td>{{user.lastName}}</td>
            <td>{{user.favLanguage}}</td>
            <td><button ng-click="deleteUser(user)">Delete</button></td>
          </tr>
        </tbody>
      </table>
    </div>

  </body>
</html>
